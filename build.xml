<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- WARNING: Eclipse auto-generated file. Any modifications will be overwritten. 
	To include a user specific buildfile here, simply create one in the same 
	directory with the processing instruction <?eclipse.ant.import?> as the first 
	entry and export the buildfile again. -->
<project basedir="." default="build" name="ASA_Orchestrator">
	<property environment="env" />
	<property name="debuglevel" value="source,lines,vars" />
	<property name="target" value="1.8" />
	<property name="source" value="1.8" />
	<property name="runtime" value="Runtime/" />
	<property name="dist" value="dist/" />
	<property name="tmpdist" value="tmpdist/" />
	<property name="web.dir" value="WebContent/" />
	<property name="install.dir" value="installer/" />

	<path id="EAR Libraries.libraryclasspath" />
	<path
		id="Apache Tomcat v7.0 [Apache Tomcat v7.0].libraryclasspath">
		<pathelement location="/lib/cxf-tools-validator-3.0.3.jar" />
		<pathelement location="/lib/cxf-tools-misctools-3.0.3.jar" />
		<pathelement location="/lib/cxf-tools-wsdlto-core-3.0.3.jar" />
		<pathelement location="/lib/ojdbc6.jar" />
		<pathelement location="/lib/el-api.jar" />
		<pathelement location="/lib/cxf-tools-wsdlto-frontend-javascript-3.0.3.jar" />
		<pathelement location="/lib/cxf-rt-databinding-xmlbeans-3.0.3.jar" />
		<pathelement location="/lib/xml-resolver-1.2.jar" />
		<pathelement location="/lib/jasper.jar" />
		<pathelement location="/lib/jsp-api.jar" />
		<pathelement location="/lib/AtsStore4Java_3-0.jar" />
		<pathelement location="/lib/cxf-rt-transports-http-netty-client-3.0.3.jar" />
		<pathelement location="/lib/cxf-rt-bindings-soap-3.0.3.jar" />
		<pathelement location="/lib/cxf-tools-common-3.0.3.jar" />
		<pathelement location="/lib/websocket-api.jar" />
		<pathelement location="/lib/tomcat-i18n-fr.jar" />
		<pathelement location="/lib/cxf-rt-frontend-jaxws-3.0.3.jar" />
		<pathelement location="/lib/cxf-core-3.0.3.jar" />
		<pathelement location="/lib/cxf-tools-corba-3.0.3.jar" />
		<pathelement location="/lib/tomcat7-websocket.jar" />
		<pathelement location="/lib/commons-lang-2.6.jar" />
		<pathelement location="/lib/cxf-xjc-runtime-3.0.2.jar" />
		<pathelement location="/lib/cxf-rt-databinding-aegis-3.0.3.jar" />
		<pathelement location="/lib/cxf-rt-ws-addr-3.0.3.jar" />
		<pathelement location="/lib/tomcat-api.jar" />
		<pathelement location="/lib/cxf-tools-wsdlto-frontend-jaxws-3.0.3.jar" />
		<pathelement location="/lib/tomcat-i18n-es.jar" />
		<pathelement location="/lib/ats_utils.jar" />
		<pathelement location="/lib/DynamicWebClient.jar" />
		<pathelement location="/lib/catalina.jar" />
		<pathelement location="/lib/geronimo-jaxws_2.2_spec-1.2.jar" />
		<pathelement location="/lib/cxf-tools-wadlto-jaxrs-3.0.3.jar" />
		<pathelement location="/lib/catalina-ant.jar" />
		<pathelement location="/lib/cxf-xjc-ts-3.0.2.jar" />
		<pathelement location="/lib/jaxb-api-2.2.11.jar" />
		<pathelement location="/lib/cxf-rt-transports-http-3.0.3.jar" />
		<pathelement location="/lib/crypt.jar" />
		<pathelement location="/lib/cxf-rt-databinding-jaxb-3.0.3.jar" />
		<pathelement location="/lib/catalina-ha.jar" />
		<pathelement location="/lib/xmlschema-core-2.1.0.jar" />
		<pathelement location="/lib/cxf-rt-ws-policy-3.0.3.jar" />
		<pathelement location="/lib/catalina-tribes.jar" />
		<pathelement location="/lib/tomcat-jdbc.jar" />
		<pathelement location="/lib/cxf-rt-bindings-object-3.0.3.jar" />
		<pathelement location="/lib/stax2-api-3.1.4.jar" />
		<pathelement location="/lib/slf4j-jdk14-1.7.7.jar" />
		<pathelement location="/lib/tomcat-i18n-ja.jar" />
		<pathelement location="/lib/PostEvent4Java.jar" />
		<pathelement location="/lib/cxf-tools-wsdlto-databinding-jaxb-3.0.3.jar" />
		<pathelement location="/lib/tomcat-coyote.jar" />
		<pathelement location="/lib/commons-collections-3.2.1.jar" />
		<pathelement location="/lib/slf4j-api-1.7.7.jar" />
		<pathelement location="/lib/jaxb-impl-2.2.10-b140310.1920.jar" />
		<pathelement location="/lib/cxf-rt-transports-http-netty-server-3.0.3.jar" />
		<pathelement location="/lib/jaxb-core-2.2.10-b140310.1920.jar" />
		<pathelement location="/lib/cxf-rt-bindings-corba-3.0.3.jar" />
		<pathelement location="/lib/cxf-rt-databinding-jibx-3.0.3.jar" />
		<pathelement location="/lib/tomcat-util.jar" />
		<pathelement location="/lib/jaxb-xjc-2.2.10-b140310.1920.jar" />
		<pathelement location="/lib/cxf-xjc-bug671-3.0.2.jar" />
		<pathelement location="/lib/tomcat-dbcp.jar" />
		<pathelement location="/lib/cxf-rt-wsdl-3.0.3.jar" />
		<pathelement location="/lib/cxf-rt-frontend-simple-3.0.3.jar" />
		<pathelement location="/lib/cxf-xjc-boolean-3.0.2.jar" />
		<pathelement location="/lib/jasper-el.jar" />
		<pathelement location="/lib/annotations-api.jar" />
		<pathelement location="/lib/neethi-3.0.3.jar" />
		<pathelement location="/lib/woodstox-core-asl-4.4.1.jar" />
		<pathelement location="/lib/cxf-rt-bindings-xml-3.0.3.jar" />
		<pathelement location="/lib/cxf-xjc-dv-3.0.2.jar" />
		<pathelement location="/lib/wsdl4j-1.6.3.jar" />
		<pathelement location="/lib/cxf-rt-transports-http-hc-3.0.3.jar" />
		<pathelement location="/lib/cxf-rt-bindings-coloc-3.0.3.jar" />
		<pathelement location="/lib/cxf-xjc-javadoc-3.0.2.jar" />
		<pathelement location="/lib/ecj-4.4.2.jar" />
		<pathelement location="/lib/cxf-rt-transports-http-jetty-3.0.3.jar" />
		<pathelement location="/lib/cxf-tools-java2ws-3.0.3.jar" />
		<pathelement location="/lib/cxf-rt-databinding-sdo-3.0.3.jar" />
	</path>
	<path id="ASA_Orchestrator.classpath">
		<pathelement location="build/classes" />
		<path refid="EAR Libraries.libraryclasspath" />
		<pathelement location="../ATS State Machine Executor/dist/StateMachine.jar" />
		<pathelement location="../ServerLogger/lib/AsaServerLogger.jar" />
		<pathelement location="../MenuManager/dist/MenuManager.jar" />
		<pathelement location="../mgm/lib/AsaOrchestratorManagement.jar" />
		<pathelement location="../Imports/JLIB/TomcatJdbc/dist/ats_jdbc.jar" />
		<pathelement location="lib/ats_jdbc.jar" />
		<pathelement location="lib/servlet-api.jar" />
		<pathelement location="lib/log4j-1.2.16.jar" />
		<pathelement location="lib/xstream-1.3.1.jar" />
		<path refid="Apache Tomcat v7.0 [Apache Tomcat v7.0].libraryclasspath" />
	</path>

	<target name="init">
		<mkdir dir="build/classes" />
		<copy includeemptydirs="false" todir="build/classes">
			<fileset dir="src">
				<exclude name="**/*.java" />
			</fileset>
		</copy>
	</target>

	<target name="clean">
		<delete dir="build/classes" />
	</target>

	<target depends="clean" name="cleanall" />

	<target depends="build-subprojects,build-project" name="build" />

	<target name="build-subprojects" />

	<target depends="init" name="build-project">
		<echo message="${ant.project.name}: ${ant.file}" />
		<javac debug="true" debuglevel="${debuglevel}"
			destdir="build/classes" includeantruntime="false" source="${source}"
			target="${target}">
			<src path="src" />
			<classpath refid="ASA_Orchestrator.classpath" />
		</javac>
	</target>

	<target
		description="Build all projects which reference this project. Useful to propagate changes."
		name="build-refprojects" />

	<target name="build-war">
		<unzip src="jaxws-ri-2.2.10.zip" dest="${web.dir}/WEB-INF/lib">
			<patternset>
				<include name="jaxws-ri/lib/*.jar" />
			</patternset>
			<mapper type="flatten" />
		</unzip>

		<unzip src="jersey-archive-1.19.zip"
			dest="${web.dir}/WEB-INF/lib">
			<patternset>
				<include name="jersey-archive-1.19/lib/jersey-core-1.19.jar" />
				<include
					name="jersey-archive-1.19/lib/jersey-server-1.19.jar" />
				<include
					name="jersey-archive-1.19/lib/jersey-servlet-1.19.jar" />
				<include name="jersey-archive-1.19/lib/jsr311-api-1.1.1.jar" />
			</patternset>
			<mapper type="flatten" />
		</unzip>
		
		<war destfile="${dist}${ant.project.name}.war"
			webxml="${web.dir}/WEB-INF/web.xml">
			<fileset dir="${web.dir}">
				<include name="**/*.*" />
			</fileset>

			<classes dir="build/classes" />
		</war>
	</target>

	<target name="build-installer">
		<delete dir="${tmpdist}" />
		<mkdir dir="${tmpdist}" />
		<copy todir="${tmpdist}">
			<fileset dir="${runtime}" includes="${ant.project.name}.war" />
			<fileset dir="config/" includes="*.*" />
			<fileset dir="lib" />
		</copy>

		<zip destfile="${install.dir}/installer.zip" basedir="${tmpdist}/"
			includes="**/*" />
		<delete dir="${tmpdist}" />
	</target>
</project>
